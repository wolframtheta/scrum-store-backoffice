<div class="reset-password-container">
  <div class="reset-password-card">
    <!-- Header con logo y branding -->
    <div class="reset-password-header">
      <div class="logo-container">
        <img src="assets/images/icon/ScrumS-icon.svg" alt="Scrum Store Logo" />
      </div>
      <h1>{{ 'resetPassword.title' | translate }}</h1>
      <p>{{ 'resetPassword.subtitle' | translate }}</p>
    </div>

    <!-- Formulario de restablecimiento -->
    <div class="reset-password-body">
      <!-- Mensaje de éxito -->
      @if (successMessage()) {
        <div class="mb-3">
          <p-message
            severity="success"
            [text]="successMessage() || ''"
            styleClass="w-full"
          ></p-message>
        </div>
      }

      <!-- Mensaje de error -->
      @if (errorMessage()) {
        <div class="mb-3">
          <p-message
            severity="error"
            [text]="errorMessage() || ''"
            styleClass="w-full"
          ></p-message>
        </div>
      }
      
      <form [formGroup]="resetForm" (ngSubmit)="onSubmit()">
        <!-- Campo Email -->
        <div class="field">
          <label class="label">{{ 'resetPassword.email' | translate }}</label>
          <p-inputgroup>
            <p-inputgroup-addon>
              <i class="pi pi-envelope"></i>
            </p-inputgroup-addon>
            <input
              pInputText
              type="email"
              formControlName="email"
              placeholder="tu@email.com"
              [class.ng-invalid]="email?.invalid && email?.touched"
            />
          </p-inputgroup>
          @if (email?.invalid && email?.touched) {
            <small class="p-error block mt-1">
              @if (email?.errors?.['required']) {
                {{ 'resetPassword.emailRequired' | translate }}
              }
              @if (email?.errors?.['email']) {
                {{ 'resetPassword.emailInvalid' | translate }}
              }
            </small>
          }
        </div>

        <!-- Campo Nueva Contraseña -->
        <div class="field">
          <label class="label">{{ 'resetPassword.newPassword' | translate }}</label>
          <p-inputgroup>
            <p-inputgroup-addon>
              <i class="pi pi-lock"></i>
            </p-inputgroup-addon>
            <p-password
              formControlName="password"
              placeholder="••••••••"
              [feedback]="false"
              [toggleMask]="true"
              [class.ng-invalid]="password?.invalid && password?.touched"
            />
          </p-inputgroup>
          @if (password?.invalid && password?.touched) {
            <small class="p-error block mt-1">
              @if (password?.errors?.['required']) {
                {{ 'resetPassword.passwordRequired' | translate }}
              }
              @if (password?.errors?.['minlength']) {
                {{ 'resetPassword.passwordMinLength' | translate }}
              }
            </small>
          }
        </div>

        <!-- Campo Confirmar Contraseña -->
        <div class="field">
          <label class="label">{{ 'resetPassword.confirmPassword' | translate }}</label>
          <p-inputgroup>
            <p-inputgroup-addon>
              <i class="pi pi-lock"></i>
            </p-inputgroup-addon>
            <p-password
              formControlName="confirmPassword"
              placeholder="••••••••"
              [feedback]="false"
              [toggleMask]="true"
              [class.ng-invalid]="confirmPassword?.invalid && confirmPassword?.touched"
            />
          </p-inputgroup>
          @if (confirmPassword?.invalid && confirmPassword?.touched) {
            <small class="p-error block mt-1">
              {{ 'resetPassword.confirmPasswordRequired' | translate }}
            </small>
          }
          @if (resetForm.errors?.['passwordMismatch'] && confirmPassword?.touched) {
            <small class="p-error block mt-1">
              {{ 'resetPassword.passwordsNotMatch' | translate }}
            </small>
          }
        </div>

        <!-- Botón de restablecimiento -->
        <div class="field">
          <p-button
            type="submit"
            [label]="'resetPassword.submitButton' | translate"
            icon="pi pi-key"
            [disabled]="resetForm.invalid || isLoading()"
            [loading]="isLoading()"
            styleClass="w-full reset-button"
          />
        </div>

        <!-- Link de vuelta al login -->
        <div class="additional-links">
          <a [routerLink]="['/login']">{{ 'resetPassword.backToLogin' | translate }}</a>
        </div>
      </form>
    </div>
  </div>
</div>

